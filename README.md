# AI Enhanced Blog Post GitHub Action

This action enhances Jekyll blog posts using OpenAI's API. It reads the content of a markdown file, uses a specified "enhance policy" from the front matter as an instruction, and replaces the original content with the AI-generated text.

## How it works

The action performs the following steps:
1.  It iterates through markdown files in a specified directory (`_posts_commit` by default in the Python script).
2.  For each file, it reads the content and parses the Jekyll front matter.
3.  It looks for a `enhance_policy` field in the front matter.
4.  The content of the post (excluding the front matter) is sent to the OpenAI Chat Completions API. The `enhance_policy` is used as the system message (instruction).
5.  The original content of the post is replaced with the response from the OpenAI API.

## Usage

This action is designed to be used in a GitHub Actions workflow. Here is an example of how to use it:

```yaml
- name: Enhance Posts
  uses: techtana/ghaction_ai_enhanced_blogpost@main
  with:
    openai_api_key: ${{ secrets.OPENAI_API_KEY }}
    github_token: ${{ secrets.GITHUB_TOKEN }}
```

### Inputs

-   `openai_api_key` (required): Your OpenAI API key. This should be stored as a secret in your repository.
-   `github_token` (required): The GitHub token, used for API calls to GitHub. You should use the default `${{ secrets.GITHUB_TOKEN }}`.

### Example Workflow

```yaml
name: Enhance and Deploy Blog Posts

on:
  push:
    branches:
      - main

jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Enhance Posts
        uses: techtana/ghaction_ai_enhanced_blogpost@main
        with:
          openai_api_key: ${{ secrets.OPENAI_API_KEY }}
          github_token: ${{ secrets.GITHUB_TOKEN }}

      - name: Commit Changes
        run: |
          git config --global user.name 'github-actions[bot]'
          git config --global user.email 'github-actions[bot]@users.noreply.github.com'
          git add .
          git commit -m "Enhance posts" || echo "No changes to commit"
          git push

      # ... further steps to build and deploy your Jekyll site
```

### Example Jekyll Post

To use this action, your Jekyll post should have an `enhance_policy` in the front matter.

```markdown
---
layout: post
title: "My First AI-Enhanced Post"
enhance_policy: "Summarize this blog post in three paragraphs. Be concise and to the point."
---

This is the original content of my blog post. I want the AI to summarize this.
It is a long post with many details that I want to be made more accessible to the reader.
...
```

After the action runs, the content of the post will be replaced with the summary generated by OpenAI.

## Development

This action is composed of a Python script (`main.py`) that uses the `openai` and `python-frontmatter` libraries. The dependencies are listed in `requirements.txt`. The action is defined in `action.yml`.
